

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Quickstart &#8212; mlqa 0.1.0 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mlqa.checkers" href="checkers.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/mlqa.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="introduction.html">Introduction</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="">Quickstart</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="checkers.html">mlqa.checkers</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="identifiers.html">mlqa.identifiers</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/ddaskan/mlqa/" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/_DoganAskan" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
        
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#diffchecker-basics" class="nav-link">DiffChecker Basics</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#diffchecker-details" class="nav-link">DiffChecker Details</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#diffchecker-with-logging" class="nav-link">DiffChecker with Logging</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#checkers-with-logging" class="nav-link">Checkers with Logging</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/ddaskan/mlqa/edit/master/docs/source/quickstart.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>Here, you can see some quick examples on how to utilize the package. For more details, refer to <a class="reference external" href="../index.html#api-reference">API Reference</a>.</p>
<div class="section" id="diffchecker-basics">
<h2>DiffChecker Basics<a class="headerlink" href="#diffchecker-basics" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="identifiers.html#identifiers.DiffChecker">DiffChecker</a> is designed to perform QA in an integrated way on pd.DataFrame.</p>
<p>You can easily initiate the object and fit a pd.DataFrame.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mlqa.identifiers</span> <span class="kn">import</span> <span class="n">DiffChecker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;mean_col&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;na_col&#39;</span><span class="p">:[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">}))</span>
</pre></div>
</div>
<p>Then, you can check on new data if it’s okay for given criteria. Below, you can see data with increased NA count in column <cite>na_col</cite>. The default threshold is 0.5 which means it should be okay if NA rate is 50% more than the fitted data. NA rate is 50% in the fitted data so up to 75% (i.e. 50*(1+0.5)) should be okay. NA rate is 70% in the new data and, as expected, the QA passes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;mean_col&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;na_col&#39;</span><span class="p">:[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">70</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">30</span><span class="p">}))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you think the <a class="reference external" href="identifiers.html#identifiers.DiffChecker.threshold">threshold</a> is too loose, you can adjust as you wish with <a class="reference external" href="identifiers.html#identifiers.DiffChecker.set_threshold">set_threshold</a> method. And, now the same returns <cite>False</cite> indicating the QA has failed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;mean_col&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;na_col&#39;</span><span class="p">:[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">70</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">30</span><span class="p">}))</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="diffchecker-details">
<h2>DiffChecker Details<a class="headerlink" href="#diffchecker-details" title="Permalink to this headline">¶</a></h2>
<p>As default, <a class="reference external" href="identifiers.html#identifiers.DiffChecker">DiffChecker</a> is initialized with <cite>qa_level=’loose’</cite>. Different values can also be given.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mlqa.identifiers</span> <span class="kn">import</span> <span class="n">DiffChecker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">threshold</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">(</span><span class="n">qa_level</span><span class="o">=</span><span class="s1">&#39;mid&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">threshold</span>
<span class="go">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">(</span><span class="n">qa_level</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">threshold</span>
<span class="go">0.1</span>
</pre></div>
</div>
<p>To be more precise, you can set both <a class="reference external" href="identifiers.html#identifiers.DiffChecker.threshold">threshold</a> and <a class="reference external" href="identifiers.html#identifiers.DiffChecker.stats">stats</a> individually.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_stats</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">}))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">4.2</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mf">1.1</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">}))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can even be more detailed in <a class="reference external" href="identifiers.html#identifiers.DiffChecker.set_threshold">set_threshold</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_stats</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># to reset all thresholds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dc</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>
<span class="go">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span><span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">})</span> <span class="c1"># to set in column level</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dc</span><span class="o">.</span><span class="n">threshold_df</span><span class="p">)</span>
<span class="go">      col1  col2</span>
<span class="go">mean   0.2   0.1</span>
<span class="go">max    0.2   0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;mean&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">}})</span> <span class="c1"># to set in column-stat level</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dc</span><span class="o">.</span><span class="n">threshold_df</span><span class="p">)</span>
<span class="go">      col1  col2</span>
<span class="go">mean   0.1   0.1</span>
<span class="go">max    0.2   0.1</span>
</pre></div>
</div>
<p>You can also pickle the object to be used later with <a class="reference external" href="identifiers.html#identifiers.DiffChecker.to_pickle">to_pickle</a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dc1</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc1</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;DiffChecker.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, to load the same object later.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pkl_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;DiffChecker.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc2</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pkl_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pkl_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="diffchecker-with-logging">
<h2>DiffChecker with Logging<a class="headerlink" href="#diffchecker-with-logging" title="Permalink to this headline">¶</a></h2>
<p>If you enable logging functionality, you can get detailed description of what column failed for which stat and why. You can even log <a class="reference external" href="identifiers.html#identifiers.DiffChecker">DiffChecker</a> steps.</p>
<p>Just initiate the class with <cite>logger=’&lt;your-logger-name&gt;.log’</cite> argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mlqa.identifiers</span> <span class="kn">import</span> <span class="n">DiffChecker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="s1">&#39;mylog.log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;mean_col&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;na_col&#39;</span><span class="p">:[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">set_threshold</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;mean_col&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span><span class="o">*</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;na_col&#39;</span><span class="p">:[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="mi">70</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">30</span><span class="p">}))</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If you open <cite>mylog.log</cite>, you’ll see something like below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">15</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span><span class="mi">146</span><span class="o">|</span><span class="n">mean</span> <span class="n">value</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="mf">1.25</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">range</span> <span class="n">of</span> <span class="p">[</span><span class="mf">1.35</span><span class="p">,</span> <span class="mf">1.65</span><span class="p">]</span> <span class="k">for</span> <span class="n">mean_col</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">15</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span><span class="mi">147</span><span class="o">|</span><span class="n">na_rate</span> <span class="n">value</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="mf">0.7</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">range</span> <span class="n">of</span> <span class="p">[</span><span class="mf">0.45</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">]</span> <span class="k">for</span> <span class="n">na_col</span>
</pre></div>
</div>
<p>If you initiate the class with also <cite>log_info=True</cite> argument, then the other class steps (e.g. <a class="reference external" href="identifiers.html#identifiers.DiffChecker.set_threshold">set_threshold</a>, <a class="reference external" href="identifiers.html#identifiers.DiffChecker.check">check</a>) would be logged, too.</p>
</div>
<div class="section" id="checkers-with-logging">
<h2>Checkers with Logging<a class="headerlink" href="#checkers-with-logging" title="Permalink to this headline">¶</a></h2>
<p>There are also <a class="reference external" href="checkers.html">checkers</a> to provide other kind of QA functionalities such as <a class="reference external" href="checkers.html#checkers.qa_outliers">outliers detection</a>, <a class="reference external" href="checkers.html#checkers.qa_df_set">pd.DataFrame comparison</a> or some <a class="reference external" href="checkers.html#checkers.qa_category_distribution_on_value">categorical value QA</a>. You can use these individually or combining with <a class="reference external" href="identifiers.html#identifiers.DiffChecker">DiffChecker</a>’s logger.</p>
<p>Let’s say you initiated <a class="reference external" href="identifiers.html#identifiers.DiffChecker">DiffChecker</a> with some logger already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mlqa.identifiers</span> <span class="kn">import</span> <span class="n">DiffChecker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dc</span> <span class="o">=</span> <span class="n">DiffChecker</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="s1">&#39;mylog.log&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you can just pass <cite>logger</cite> attribute of the object when calling <a class="reference external" href="checkers.html">checkers</a>. Here is an example of <a class="reference external" href="checkers.html#checkers.qa_outliers">qa_outliers</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mlqa.checkers</span> <span class="k">as</span> <span class="nn">ch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ch</span><span class="o">.</span><span class="n">qa_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">std</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">dc</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This should log something like below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">17</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="mi">426</span><span class="o">|</span><span class="mi">70</span> <span class="n">outliers</span> <span class="n">detected</span> <span class="n">within</span> <span class="n">inlier</span> <span class="nb">range</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.053985309527773806</span><span class="p">,</span> <span class="mf">0.059407124225845764</span><span class="p">])</span> <span class="k">for</span> <span class="n">col1</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">17</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="mi">428</span><span class="o">|</span><span class="mi">53</span> <span class="n">outliers</span> <span class="n">detected</span> <span class="n">within</span> <span class="n">inlier</span> <span class="nb">range</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.5070058315486367</span><span class="p">,</span> <span class="mf">0.46793470772834406</span><span class="p">])</span> <span class="k">for</span> <span class="n">col2</span>
</pre></div>
</div>
<p>You can also compare multiple datasets from the same population with <a class="reference external" href="checkers.html#checkers.qa_df_set">qa_df_set</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ch</span><span class="o">.</span><span class="n">qa_df_set</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="n">logger</span><span class="o">=</span><span class="n">dc</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This should log something like below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">581</span><span class="o">|</span><span class="n">df</span> <span class="n">sets</span> <span class="n">QA</span> <span class="n">initiated</span> <span class="k">with</span> <span class="n">threshold</span> <span class="mf">0.1</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">598</span><span class="o">|</span><span class="n">mean</span> <span class="n">of</span> <span class="n">col1</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">1.5</span> <span class="ow">and</span> <span class="mf">5.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">599</span><span class="o">|</span><span class="n">mean</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">2.0</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">2.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">599</span><span class="o">|</span><span class="n">std</span> <span class="n">of</span> <span class="n">col1</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">0.51299</span> <span class="ow">and</span> <span class="mf">4.10391</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">599</span><span class="o">|</span><span class="nb">min</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">4.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">599</span><span class="o">|</span><span class="mi">25</span><span class="o">%</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">4.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">599</span><span class="o">|</span><span class="mi">50</span><span class="o">%</span> <span class="n">of</span> <span class="n">col1</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">1.5</span> <span class="ow">and</span> <span class="mf">5.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="mi">50</span><span class="o">%</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">2.0</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">2.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="mi">75</span><span class="o">%</span> <span class="n">of</span> <span class="n">col1</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">2.0</span> <span class="ow">and</span> <span class="mf">9.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="mi">75</span><span class="o">%</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">4.0</span> <span class="ow">and</span> <span class="mf">0.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="nb">max</span> <span class="n">of</span> <span class="n">col1</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">2.0</span> <span class="ow">and</span> <span class="mf">9.0</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="nb">max</span> <span class="n">of</span> <span class="n">col2</span> <span class="ow">not</span> <span class="n">passed</span><span class="o">.</span> <span class="n">Values</span> <span class="n">are</span> <span class="mf">4.0</span> <span class="ow">and</span> <span class="mf">0.0</span>
<span class="n">INFO</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">600</span><span class="o">|</span><span class="n">df</span> <span class="n">sets</span> <span class="n">QA</span> <span class="n">done</span> <span class="k">with</span> <span class="n">threshold</span> <span class="mf">0.1</span>
</pre></div>
</div>
<p>For categorical values, you can check its distribution on a numeric column with <a class="reference external" href="checkers.html#checkers.qa_category_distribution_on_value">qa_category_distribution_on_value</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Gender&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">],</span><span class="s1">&#39;Weight&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">125</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ch</span><span class="o">.</span><span class="n">qa_category_distribution_on_value</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="s1">&#39;Gender&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;Male&#39;</span><span class="p">:</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">:</span><span class="o">.</span><span class="mi">5</span><span class="p">},</span> <span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">dc</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This should log something like below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">019</span><span class="o">|</span><span class="n">Gender</span> <span class="n">distribution</span> <span class="n">looks</span> <span class="n">wrong</span><span class="p">,</span> <span class="n">check</span> <span class="n">Weight</span> <span class="k">for</span> <span class="n">Gender</span><span class="o">=</span><span class="n">Male</span><span class="o">.</span> <span class="n">Expected</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">Actual</span><span class="o">=</span><span class="mf">0.6666666666666666</span>
<span class="n">WARNING</span><span class="o">|</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">31</span> <span class="mi">18</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">019</span><span class="o">|</span><span class="n">Gender</span> <span class="n">distribution</span> <span class="n">looks</span> <span class="n">wrong</span><span class="p">,</span> <span class="n">check</span> <span class="n">Weight</span> <span class="k">for</span> <span class="n">Gender</span><span class="o">=</span><span class="n">Female</span><span class="o">.</span> <span class="n">Expected</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">Actual</span><span class="o">=</span><span class="mf">0.3333333333333333</span>
</pre></div>
</div>
<p>NOTE: sorry for the long lines, I had to write like that because of a <a class="reference external" href="https://github.com/executablebooks/sphinx-copybutton/issues/65">bug</a> in <cite>sphinx-copybutton</cite> extension.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="introduction.html" title="previous page">Introduction</a>
    <a class='right-next' id="next-link" href="checkers.html" title="next page">mlqa.checkers</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, Dogan Askan.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>